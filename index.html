<html>
	<!-- AngularJS -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<!-- Firebase -->
	<script src="https://www.gstatic.com/firebasejs/4.13.0/firebase.js"></script>
	<!-- <script type="text/javascript" src="js/speechRecognition.js"></script> -->
	<!-- AngularFire -->
	<!-- <script src="https://cdn.firebase.com/libs/angularfire/2.3.0/angularfire.min.js"></script> -->
	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="watsonTools/watson-speech.js"></script>
	<!-- window.fetch pollyfill for IE/Edge & Older Chrome/FireFox -->
	<script src="watsonTools/fetch.js"></script>


	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyAuJbeLVATxl9ZmziLsfoo6KoDiQmas1H8",
	    authDomain: "hackhlth-d682c.firebaseapp.com",
	    databaseURL: "https://hackhlth-d682c.firebaseio.com",
	    projectId: "hackhlth-d682c",
	    storageBucket: "hackhlth-d682c.appspot.com",
	    messagingSenderId: "154996286604"
	  };
	  firebase.initializeApp(config);
	  var database = firebase.database();
	</script>

	<script>

		var Auth_ = {
			signUp: function(username, password){
				firebase.auth().createUserWithEmailAndPassword(username, password).then(function(){
					// on successful sign up, render main page
					console.log('success signing up');

				}).catch(function(error) {
				  // Handle Errors here.
				  console.log(error.code);
				  console.log(error.message);
				});
			},

			signIn: function(username, password){
				firebase.auth().signInWithEmailAndPassword(username, password).then(function(){
					// on successful sign in, render main page
					console.log('success signing in');

				}).catch(function(error) {
					// Handle Errors here.
					console.log(error.code);
					console.log(error.message);
				});
			},

			signOut: function(){
				firebase.auth().signOut().then(function() {
					// Sign-out successful.
					console.log('sign out successful');
				}).catch(function(error) {
					// Handle Errors here.
					console.log(error.code);
					console.log(error.message);
				});
			}
		}

		// Add an object to a bucket in firebase
		var FBHelper_ = {
			addToBucket: function(bucket, key, obj){
				database.ref(bucket + "/" + key).set(obj, function(error){
			    	console.log(error);
			    });
			}
		}

		var app = angular.module('myApp', []);

		app.controller('loginCtrl', function($scope) {
		    $scope.signUp = function(){
		    	Auth_.signUp($scope.username, $scope.password);
		    }

		    $scope.signIn = function(){
		    	Auth_.signIn($scope.username, $scope.password);
		    }

		    $scope.signOut = function(){
		    	Auth_.signOut();
		    }

		    // $scope.addPerson = function(){
		    // 	FBHelper_.addToBucket(songdb, )
		    // }
		});

		// function testfb(){
		// 	database.ref('songdb/' + "doctor name hello").set({
		//      	song: "song",
		//      	key: "key",
		//     }, function(error){
		//     	console.log(error);
		//     });
		// 	// database.ref('bucket1/').once('value').then(function(snapshot) {
		// 	// 	database.ref('songdb/').set({
		// 	//      	song: "song",
		// 	//      	key: "key",
		// 	//     }, function(error){

		// 	//     }
		// 	// });
		// }

		// testfb();




	</script>

	<script>
		var token = '8v2vmlkTLXCTbpGh2N7O5rbpNrZMuWumpmE7lAMKltGEsJW9k3j64HttQYT1LvtiCZANWrcjLOYNgLXWovhASs6P54NK43Kv7cRhYtMEAqLWEfqk5aQXUv9Zg27yJeHM5Ur6nxS9dfGBQm0i8Y%2B66RFCYx4BPOHTJzeA5achnDHl2rcEGXoBmm2E9zJ%2Fvt3u5pY9iQFNuMb4i8OijuCuhgSHXCBjT0d88cCiRhkpG30vd59VjNI0X27%2B0sIEDoAIiwbhzMg2VrY%2BkGFCjvBHC%2FmzU3DhvmAOKbr4l8L08cmpDfxjfWveTpYH1Y5tqgt%2Fz%2FfzgawWc27AAqh3J9Qn2o8VUlIWq%2F6FdfiVCAX19yY5FucBRZvHQ%2BP9Bi3pBT4xvak%2B2yDw%2Fk6kNge%2BdR1sBQfVNFa2g63He%2FlV8gmTeQ2%2FPJZbynqW9yhnhmaTwLrwKv2UQx2YDN1jbl94M9pk5iZGW%2FKYuUG8B9rhCB%2FCpjJuJ%2FVlUaNhd%2B%2Fp87X15whLWuLXZWmp6tx890RJHAsb50fdsXUbIKwUCNzKzkVBaYGEaD7h0fZ57ztzSRPCbx2WAzpRR6YXW79DRssgujNEvXpjj%2BsE9S54vTX70YW%2BfvCYyJ7JrkWlOK6jV9Rqv8de2PcCg0HneE35DrLjHlJCS0cDYD3LkjJ6jXFCOWdKPsjpwslJnr%2BoPmQjDvVdXOvjwRw45jqWk%2FIInRGKCvf89ZPSwPkE40khscbdEIB08ST1D4S5e53Wp18NmuVU7EvB99eOIvQQj9S7LE6%2FojxLLd6wKdgwGGESvf7plg3m0VUb%2BG7Vo0OdEcgtFykd9lTI6yZLQPB1U5U5kZSkT9wb2Bwi3isEb%2BpUdSllUs75ib%2FAzKzLXgpcVqsBBcUAYKmwYdLSsuSvlh529pgDQ7EviTGdTZihGk8xzgbp6V%2BX3yTStgQ0ilgPdG6SilC2RK4OjXfLFUX1w3y3KtIjE03RhYrA8kB8Nmgm';

		// var button = $("#button");
		// $("#button").disabled = false;

		// var token;
		// fetch('token')
		// .then(function(response) {
		//   return response.text();
		// }).then(function(t) {
		//     token = t;
		//     button.disabled = false;
		// });
		console.log(token);

		function onClick() {
			console.log('hello');
			WatsonSpeech.SpeechToText.recognizeFile({
			  token: token,
			  file: 'watsonTools/audio-file.flac',
			  outputElement: '#output',
			  play: true
			})
			  .on('error', function(err) {
			    console.log(err);
			  });
		}

	</script>

	<body ng-app="myApp" ng-controller="loginCtrl">
<!-- 		<div >
		First Name: <input type="text" ng-model="firstName"><br>
		Last Name: <input type="text" ng-model="lastName"><br>
		Full Name: {{firstName + " " + lastName}}
		</div> -->

<!-- 		<input type="text" name="email" ng-model="username">
		<input type="password" name="pass" ng-model="password"> -->

		<!-- <button ng-click="signUp()">Add something to firebase</button>
		 
		<button ng-click="signUp()">Sign Up</button>
		<button ng-click="signIn()">Sign In</button>
		<button ng-click="signOut()">Sign Out</button> -->

		<button onclick = "onClick()" id="button">Button</button>
		<h1>Welcome to My Awesome App</h1>
		<h2>Output:</h2>
  		<div id="output">--</div>
	 </body>
</html>